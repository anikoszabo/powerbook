<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>1 One-sample mean: precision-based sample size | Power and Sample Size Manual</title>
  <meta name="description" content="This is a reference book for power and sample size calculations using R" />
  <meta name="generator" content="bookdown 0.31 and GitBook 2.6.7" />

  <meta property="og:title" content="1 One-sample mean: precision-based sample size | Power and Sample Size Manual" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a reference book for power and sample size calculations using R" />
  <meta name="github-repo" content="anikoszabo/powerbook" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="1 One-sample mean: precision-based sample size | Power and Sample Size Manual" />
  
  <meta name="twitter:description" content="This is a reference book for power and sample size calculations using R" />
  

<meta name="author" content="Aniko Szabo" />


<meta name="date" content="2023-03-22" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="one-sample-proportion-precision-based-sample-size.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Power and Sample Size Manual</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="part"><span><b>I Analyzing population means</b></span></li>
<li class="chapter" data-level="1" data-path="one-sample-mean-precision-based-sample-size.html"><a href="one-sample-mean-precision-based-sample-size.html"><i class="fa fa-check"></i><b>1</b> One-sample mean: precision-based sample size</a>
<ul>
<li class="chapter" data-level="1.1" data-path="one-sample-mean-precision-based-sample-size.html"><a href="one-sample-mean-precision-based-sample-size.html#example"><i class="fa fa-check"></i><b>1.1</b> Example</a></li>
<li class="chapter" data-level="1.2" data-path="one-sample-mean-precision-based-sample-size.html"><a href="one-sample-mean-precision-based-sample-size.html#data-generating-mechanism"><i class="fa fa-check"></i><b>1.2</b> Data generating mechanism</a></li>
<li class="chapter" data-level="1.3" data-path="one-sample-mean-precision-based-sample-size.html"><a href="one-sample-mean-precision-based-sample-size.html#precision-measures"><i class="fa fa-check"></i><b>1.3</b> Precision measures</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="one-sample-mean-precision-based-sample-size.html"><a href="one-sample-mean-precision-based-sample-size.html#standard-error"><i class="fa fa-check"></i><b>1.3.1</b> Standard error</a></li>
<li class="chapter" data-level="1.3.2" data-path="one-sample-mean-precision-based-sample-size.html"><a href="one-sample-mean-precision-based-sample-size.html#confidence-interval"><i class="fa fa-check"></i><b>1.3.2</b> Confidence Interval</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="one-sample-mean-precision-based-sample-size.html"><a href="one-sample-mean-precision-based-sample-size.html#simulation-study"><i class="fa fa-check"></i><b>1.4</b> Simulation study</a></li>
<li class="chapter" data-level="1.5" data-path="one-sample-mean-precision-based-sample-size.html"><a href="one-sample-mean-precision-based-sample-size.html#getting-inputs"><i class="fa fa-check"></i><b>1.5</b> Getting inputs</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="one-sample-mean-precision-based-sample-size.html"><a href="one-sample-mean-precision-based-sample-size.html#estimating-standard-deviation"><i class="fa fa-check"></i><b>1.5.1</b> Estimating Standard Deviation</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="one-sample-mean-precision-based-sample-size.html"><a href="one-sample-mean-precision-based-sample-size.html#example-revisited"><i class="fa fa-check"></i><b>1.6</b> Example revisited</a></li>
<li class="chapter" data-level="1.7" data-path="one-sample-mean-precision-based-sample-size.html"><a href="one-sample-mean-precision-based-sample-size.html#functions-in-r-packages"><i class="fa fa-check"></i><b>1.7</b> Functions in R packages</a></li>
</ul></li>
<li class="part"><span><b>II Analyzing population proportions</b></span></li>
<li class="chapter" data-level="2" data-path="one-sample-proportion-precision-based-sample-size.html"><a href="one-sample-proportion-precision-based-sample-size.html"><i class="fa fa-check"></i><b>2</b> One-sample proportion: precision-based sample size</a>
<ul>
<li class="chapter" data-level="2.1" data-path="one-sample-proportion-precision-based-sample-size.html"><a href="one-sample-proportion-precision-based-sample-size.html#example-1"><i class="fa fa-check"></i><b>2.1</b> Example</a></li>
<li class="chapter" data-level="2.2" data-path="one-sample-proportion-precision-based-sample-size.html"><a href="one-sample-proportion-precision-based-sample-size.html#data-generating-mechanism-1"><i class="fa fa-check"></i><b>2.2</b> Data generating mechanism</a></li>
<li class="chapter" data-level="2.3" data-path="one-sample-proportion-precision-based-sample-size.html"><a href="one-sample-proportion-precision-based-sample-size.html#precision-measures-1"><i class="fa fa-check"></i><b>2.3</b> Precision measures</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="one-sample-proportion-precision-based-sample-size.html"><a href="one-sample-proportion-precision-based-sample-size.html#standard-error-1"><i class="fa fa-check"></i><b>2.3.1</b> Standard error</a></li>
<li class="chapter" data-level="2.3.2" data-path="one-sample-proportion-precision-based-sample-size.html"><a href="one-sample-proportion-precision-based-sample-size.html#confidence-interval-1"><i class="fa fa-check"></i><b>2.3.2</b> Confidence interval</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="one-sample-proportion-precision-based-sample-size.html"><a href="one-sample-proportion-precision-based-sample-size.html#getting-inputs-worstbest-case-scenarios"><i class="fa fa-check"></i><b>2.4</b> Getting inputs, worst/best case scenarios</a></li>
<li class="chapter" data-level="2.5" data-path="one-sample-proportion-precision-based-sample-size.html"><a href="one-sample-proportion-precision-based-sample-size.html#simulation-study-1"><i class="fa fa-check"></i><b>2.5</b> Simulation study</a></li>
<li class="chapter" data-level="2.6" data-path="one-sample-proportion-precision-based-sample-size.html"><a href="one-sample-proportion-precision-based-sample-size.html#example-revisited-1"><i class="fa fa-check"></i><b>2.6</b> Example revisited</a></li>
<li class="chapter" data-level="2.7" data-path="one-sample-proportion-precision-based-sample-size.html"><a href="one-sample-proportion-precision-based-sample-size.html#functions-in-r-packages-1"><i class="fa fa-check"></i><b>2.7</b> Functions in R packages</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="one-sample-proportion-power-based-sample-size.html"><a href="one-sample-proportion-power-based-sample-size.html"><i class="fa fa-check"></i><b>3</b> One-sample proportion: power-based sample size</a>
<ul>
<li class="chapter" data-level="3.1" data-path="one-sample-proportion-power-based-sample-size.html"><a href="one-sample-proportion-power-based-sample-size.html#example-2"><i class="fa fa-check"></i><b>3.1</b> Example</a></li>
<li class="chapter" data-level="3.2" data-path="one-sample-proportion-power-based-sample-size.html"><a href="one-sample-proportion-power-based-sample-size.html#data-generating-mechanism-2"><i class="fa fa-check"></i><b>3.2</b> Data generating mechanism</a></li>
<li class="chapter" data-level="3.3" data-path="one-sample-proportion-power-based-sample-size.html"><a href="one-sample-proportion-power-based-sample-size.html#power-based-sample-size"><i class="fa fa-check"></i><b>3.3</b> Power-based sample size</a>
<ul>
<li class="chapter" data-level="" data-path="one-sample-proportion-power-based-sample-size.html"><a href="one-sample-proportion-power-based-sample-size.html#test-statistic"><i class="fa fa-check"></i>Test statistic</a></li>
<li class="chapter" data-level="" data-path="one-sample-proportion-power-based-sample-size.html"><a href="one-sample-proportion-power-based-sample-size.html#power-formula"><i class="fa fa-check"></i>Power formula</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="one-sample-proportion-power-based-sample-size.html"><a href="one-sample-proportion-power-based-sample-size.html#getting-inputs-worstbest-case-scenarios-1"><i class="fa fa-check"></i><b>3.4</b> Getting inputs, worst/best case scenarios</a></li>
<li class="chapter" data-level="3.5" data-path="one-sample-proportion-power-based-sample-size.html"><a href="one-sample-proportion-power-based-sample-size.html#example-revisited-2"><i class="fa fa-check"></i><b>3.5</b> Example revisited</a></li>
<li class="chapter" data-level="3.6" data-path="one-sample-proportion-power-based-sample-size.html"><a href="one-sample-proportion-power-based-sample-size.html#simulation-study-2"><i class="fa fa-check"></i><b>3.6</b> Simulation study</a></li>
<li class="chapter" data-level="3.7" data-path="one-sample-proportion-power-based-sample-size.html"><a href="one-sample-proportion-power-based-sample-size.html#functions-in-r-packages-2"><i class="fa fa-check"></i><b>3.7</b> Functions in R packages</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Power and Sample Size Manual</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="one-sample-mean-precision-based-sample-size" class="section level1 hasAnchor" number="1">
<h1><span class="header-section-number">1</span> One-sample mean: precision-based sample size<a href="one-sample-mean-precision-based-sample-size.html#one-sample-mean-precision-based-sample-size" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Co-author: Alyssa Bivens</p>
<div id="example" class="section level2 hasAnchor" number="1.1">
<h2><span class="header-section-number">1.1</span> Example<a href="one-sample-mean-precision-based-sample-size.html#example" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <a href="https://www.healthmeasures.net/explore-measurement-systems/promis">Patient-Reported Outcomes Measurement Information System (PROMIS)</a> provides validated questionnaires for a wide range of quality-of-life outcomes in the domains of physical, mental, and social health. The responses from a subject are summarized with a T-score, which has a mean 50 and standard deviation of 10 in the US general population.</p>
<p>An investigator wants to study anxiety in the population of patients with cyclic vomiting syndrome (CVS) using the PROMIS Anxiety scale to see if they report more anxiety (ie higher T-scores on the scale) than the general population. How many subjects are needed?</p>
</div>
<div id="data-generating-mechanism" class="section level2 hasAnchor" number="1.2">
<h2><span class="header-section-number">1.2</span> Data generating mechanism<a href="one-sample-mean-precision-based-sample-size.html#data-generating-mechanism" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Independently identically distributed observations <span class="math inline">\(X_1, \ldots, X_n\)</span> with mean <span class="math inline">\(\mu\)</span> and standard deviation <span class="math inline">\(\sigma\)</span>, with <span class="math inline">\(\mu\)</span> being the parameter of interest. The population mean <span class="math inline">\(\mu\)</span> is estimated by the sample mean <span class="math inline">\(\bar{X}_n\)</span> =
<span class="math inline">\(\frac{\sum(X_i)}{n}\)</span>.</p>
</div>
<div id="precision-measures" class="section level2 hasAnchor" number="1.3">
<h2><span class="header-section-number">1.3</span> Precision measures<a href="one-sample-mean-precision-based-sample-size.html#precision-measures" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="standard-error" class="section level3 hasAnchor" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> Standard error<a href="one-sample-mean-precision-based-sample-size.html#standard-error" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To calculate standard error (SE) or sample size (n) from standard error,
it is <span class="math inline">\(\underline{not}\)</span> required for the underlying distribution to be normal.</p>
<p>The standard error of sample mean is
<span class="math inline">\(SE(\bar{X}) = \frac{\sigma}{\sqrt{n}}\)</span>.</p>
<p>Solving for <span class="math inline">\(n\)</span>, we have <span class="math display">\[n= \frac{\sigma^{2}}{SE^2},\]</span> where SE is the targeted
standard error of the estimate.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="one-sample-mean-precision-based-sample-size.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;Calculate standard error for given sample size, or vice versa. Exactly one of &#39;n&#39; and &#39;se&#39; has to be NULL</span></span>
<span id="cb1-2"><a href="one-sample-mean-precision-based-sample-size.html#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="one-sample-mean-precision-based-sample-size.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;sd - expected standard deviation</span></span>
<span id="cb1-4"><a href="one-sample-mean-precision-based-sample-size.html#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;n - sample size </span></span>
<span id="cb1-5"><a href="one-sample-mean-precision-based-sample-size.html#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;se - standard error of estimated mean</span></span>
<span id="cb1-6"><a href="one-sample-mean-precision-based-sample-size.html#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="one-sample-mean-precision-based-sample-size.html#cb1-7" aria-hidden="true" tabindex="-1"></a>se_mean <span class="ot">&lt;-</span> <span class="cf">function</span> (sd, <span class="at">n=</span><span class="cn">NULL</span>, <span class="at">se=</span><span class="cn">NULL</span>)  {</span>
<span id="cb1-8"><a href="one-sample-mean-precision-based-sample-size.html#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">is.null</span>(n) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.null</span>(se))   {</span>
<span id="cb1-9"><a href="one-sample-mean-precision-based-sample-size.html#cb1-9" aria-hidden="true" tabindex="-1"></a>    (n<span class="ot">&lt;-</span>(sd<span class="sc">^</span><span class="dv">2</span>)<span class="sc">/</span>se<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb1-10"><a href="one-sample-mean-precision-based-sample-size.html#cb1-10" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(n) <span class="sc">&amp;</span> <span class="fu">is.null</span>(se)){</span>
<span id="cb1-11"><a href="one-sample-mean-precision-based-sample-size.html#cb1-11" aria-hidden="true" tabindex="-1"></a>    (se <span class="ot">&lt;-</span> sd<span class="sc">/</span><span class="fu">sqrt</span>(n))</span>
<span id="cb1-12"><a href="one-sample-mean-precision-based-sample-size.html#cb1-12" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="fu">stop</span>(<span class="st">&quot;Exactly one of &#39;n&#39; and &#39;se&#39; has to be NULL; &#39;sd&#39; must be known&quot;</span>)</span>
<span id="cb1-13"><a href="one-sample-mean-precision-based-sample-size.html#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="one-sample-mean-precision-based-sample-size.html#cb1-14" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">list</span> (<span class="at">n =</span> n, <span class="at">sd =</span> sd, <span class="at">se =</span> se)</span>
<span id="cb1-15"><a href="one-sample-mean-precision-based-sample-size.html#cb1-15" aria-hidden="true" tabindex="-1"></a>  res</span>
<span id="cb1-16"><a href="one-sample-mean-precision-based-sample-size.html#cb1-16" aria-hidden="true" tabindex="-1"></a>  }</span></code></pre></div>
</div>
<div id="confidence-interval" class="section level3 hasAnchor" number="1.3.2">
<h3><span class="header-section-number">1.3.2</span> Confidence Interval<a href="one-sample-mean-precision-based-sample-size.html#confidence-interval" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Another way to quantify the precision of the estimated mean is the width
of the resulting two-sided confidence interval, usually at a 95%
confidence level. The half of the width of a symmetric 95% confidence
interval is also called the margin of error. There are two methods for
estimating a confidence interval for a mean, which result in symmetric
intervals. We can use the <span class="math inline">\(z\)</span>-based interval if the population standard deviation
(<span class="math inline">\(\sigma\)</span>) is known, and the <span class="math inline">\(t\)</span>-based confidence interval if <span class="math inline">\(\sigma\)</span> is
unknown.</p>
<p>The confidence intervals are computed under the assumption that the data are
normally distributed. However, according to the central limit theorem,
with a sufficiently large sample size <span class="math inline">\(n\)</span>, the sample mean <span class="math inline">\(\bar{X}_n\)</span>
will be normally distributed regardless of the population distribution.</p>
<p>The <span class="math inline">\(100(1-\alpha)\)</span>% confidence interval for <span class="math inline">\(\mu\)</span> when <span class="math inline">\(\sigma\)</span> is known is
<span class="math inline">\(CI = \bar{X} \pm z_{\frac {\alpha}{2}}\frac{\sigma}{ \sqrt n}\)</span>.</p>
<p>The confidence interval when <span class="math inline">\(\sigma\)</span> is unknown is
<span class="math inline">\(CI = \bar{X} \pm t_{\frac{\alpha}{2}, n-1}\frac{s}{\sqrt n},\)</span></p>
<p>where <span class="math inline">\(t_{\frac {\alpha}{2}, n-1}\)</span> is the upper <span class="math inline">\(\frac{\alpha}{2}\)</span>th quantile of the <span class="math inline">\(t\)</span>-distribution with <span class="math inline">\(n-1\)</span> degrees of freedom, and <span class="math inline">\(s\)</span> is the sample standard deviation.</p>
<p>To understand the difference between the <span class="math inline">\(z\)</span>-based interval and <span class="math inline">\(t\)</span>-based
interval, consider the following graph:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="one-sample-mean-precision-based-sample-size.html#cb2-1" aria-hidden="true" tabindex="-1"></a>sample_sizes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">30</span>, <span class="dv">50</span>, <span class="dv">100</span>, <span class="dv">200</span>)</span>
<span id="cb2-2"><a href="one-sample-mean-precision-based-sample-size.html#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="one-sample-mean-precision-based-sample-size.html#cb2-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">c</span>(sample_sizes <span class="sc">-</span> <span class="dv">1</span>)</span>
<span id="cb2-4"><a href="one-sample-mean-precision-based-sample-size.html#cb2-4" aria-hidden="true" tabindex="-1"></a>t_values <span class="ot">&lt;-</span> <span class="fu">qt</span>(<span class="at">p=</span>.<span class="dv">05</span><span class="sc">/</span><span class="dv">2</span>, <span class="at">df =</span> df, <span class="at">lower.tail =</span> <span class="cn">FALSE</span>)</span>
<span id="cb2-5"><a href="one-sample-mean-precision-based-sample-size.html#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="one-sample-mean-precision-based-sample-size.html#cb2-6" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">qnorm</span>(<span class="at">p=</span>.<span class="dv">05</span><span class="sc">/</span><span class="dv">2</span>, <span class="at">lower.tail=</span><span class="cn">FALSE</span>)</span>
<span id="cb2-7"><a href="one-sample-mean-precision-based-sample-size.html#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="one-sample-mean-precision-based-sample-size.html#cb2-8" aria-hidden="true" tabindex="-1"></a>xy <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">n =</span> sample_sizes, </span>
<span id="cb2-9"><a href="one-sample-mean-precision-based-sample-size.html#cb2-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">t =</span> t_values,</span>
<span id="cb2-10"><a href="one-sample-mean-precision-based-sample-size.html#cb2-10" aria-hidden="true" tabindex="-1"></a>                 <span class="at">z =</span> z)</span>
<span id="cb2-11"><a href="one-sample-mean-precision-based-sample-size.html#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="one-sample-mean-precision-based-sample-size.html#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span> (xy<span class="sc">$</span>n, xy<span class="sc">$</span>t, <span class="at">type=</span><span class="st">&#39;o&#39;</span>, <span class="at">col =</span> <span class="st">&#39;red&#39;</span>,</span>
<span id="cb2-13"><a href="one-sample-mean-precision-based-sample-size.html#cb2-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">xlab =</span> <span class="st">&quot;Sample Size&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;Critical-Values&quot;</span>, </span>
<span id="cb2-14"><a href="one-sample-mean-precision-based-sample-size.html#cb2-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">main =</span> <span class="st">&quot;Critical-Values by Sample Size at 95% Confidence Level&quot;</span>)</span>
<span id="cb2-15"><a href="one-sample-mean-precision-based-sample-size.html#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(xy<span class="sc">$</span>n, xy<span class="sc">$</span>z, <span class="at">col=</span><span class="st">&#39;blue&#39;</span>, <span class="at">type=</span><span class="st">&quot;o&quot;</span>, <span class="at">pch=</span><span class="dv">4</span>)</span>
<span id="cb2-16"><a href="one-sample-mean-precision-based-sample-size.html#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">&quot;topright&quot;</span>, <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">&quot;t-values&quot;</span>, <span class="st">&quot;z-values&quot;</span>), <span class="at">col=</span><span class="fu">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;blue&quot;</span>), </span>
<span id="cb2-17"><a href="one-sample-mean-precision-based-sample-size.html#cb2-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">pch=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>), <span class="at">lty=</span><span class="dv">1</span>)</span></code></pre></div>
<p><img src="A_01_one_mean_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>The red line represents the <span class="math inline">\(t\)</span> critical values associated with various
sample sizes; the blue line represents the constant value of 1.959964,
which is the <span class="math inline">\(z\)</span> critical value. We can see that as the the sample size increases, the <span class="math inline">\(t\)</span> critical value approaches the <span class="math inline">\(z\)</span> critical value. The difference becomes small by a sample size of 30, which is the typically quoted cutoff for using the asymptotic test. The difference is barely noticeable after a sample size of 100. Overall, this shows that, in many instances, the difference
between using a <span class="math inline">\(t\)</span> critical-value and using a <span class="math inline">\(z\)</span> critical-value is
negligible.</p>
<p>The <code>prec_mean</code> function in <code>{presize}</code> provides the sample size calculation for the <span class="math inline">\(t\)</span>-based confidence interval.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="one-sample-mean-precision-based-sample-size.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(presize)</span>
<span id="cb3-2"><a href="one-sample-mean-precision-based-sample-size.html#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(prec_mean)</span></code></pre></div>
<pre><code>## function (mean, sd, n = NULL, conf.width = NULL, conf.level = 0.95, ..., 
##     mu = NULL)</code></pre>
<p>Note that the formulas above imply that the <code>mean</code> is a superfluous parameter, and can be set to any value. For completeness, the following function implements a <span class="math inline">\(z\)</span>-based computation.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="one-sample-mean-precision-based-sample-size.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Function that can find the n or conf.width based on what is null.</span></span>
<span id="cb5-2"><a href="one-sample-mean-precision-based-sample-size.html#cb5-2" aria-hidden="true" tabindex="-1"></a>prec_mean_z <span class="ot">&lt;-</span> <span class="cf">function</span> (sd, <span class="at">n =</span> <span class="cn">NULL</span>, <span class="at">conf.width =</span> <span class="cn">NULL</span>, <span class="at">conf.level=</span>.<span class="dv">95</span>) {</span>
<span id="cb5-3"><a href="one-sample-mean-precision-based-sample-size.html#cb5-3" aria-hidden="true" tabindex="-1"></a>  alpha <span class="ot">&lt;-</span> (<span class="dv">1</span><span class="sc">-</span>conf.level)<span class="sc">/</span><span class="dv">2</span></span>
<span id="cb5-4"><a href="one-sample-mean-precision-based-sample-size.html#cb5-4" aria-hidden="true" tabindex="-1"></a>  z <span class="ot">&lt;-</span> <span class="fu">qnorm</span>(alpha, <span class="at">lower.tail =</span> <span class="cn">FALSE</span>)</span>
<span id="cb5-5"><a href="one-sample-mean-precision-based-sample-size.html#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="one-sample-mean-precision-based-sample-size.html#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">is.null</span>(conf.width) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.null</span>(n)) {</span>
<span id="cb5-7"><a href="one-sample-mean-precision-based-sample-size.html#cb5-7" aria-hidden="true" tabindex="-1"></a>  ci<span class="ot">&lt;-</span> (z<span class="sc">*</span>(sd<span class="sc">/</span><span class="fu">sqrt</span>(n)))</span>
<span id="cb5-8"><a href="one-sample-mean-precision-based-sample-size.html#cb5-8" aria-hidden="true" tabindex="-1"></a>  conf.width <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> ci</span>
<span id="cb5-9"><a href="one-sample-mean-precision-based-sample-size.html#cb5-9" aria-hidden="true" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">list</span> (<span class="at">sd =</span> sd, <span class="at">n =</span> n, <span class="at">conf.width =</span> conf.width, <span class="at">conf.level =</span> conf.level)</span>
<span id="cb5-10"><a href="one-sample-mean-precision-based-sample-size.html#cb5-10" aria-hidden="true" tabindex="-1"></a>res</span>
<span id="cb5-11"><a href="one-sample-mean-precision-based-sample-size.html#cb5-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-12"><a href="one-sample-mean-precision-based-sample-size.html#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="one-sample-mean-precision-based-sample-size.html#cb5-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.null</span>(conf.width) <span class="sc">&amp;</span> <span class="fu">is.null</span>(n)) {</span>
<span id="cb5-14"><a href="one-sample-mean-precision-based-sample-size.html#cb5-14" aria-hidden="true" tabindex="-1"></a>  ci <span class="ot">&lt;-</span> conf.width<span class="sc">/</span><span class="dv">2</span></span>
<span id="cb5-15"><a href="one-sample-mean-precision-based-sample-size.html#cb5-15" aria-hidden="true" tabindex="-1"></a>  n <span class="ot">&lt;-</span> ((sd<span class="sc">*</span>z)<span class="sc">/</span>ci)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb5-16"><a href="one-sample-mean-precision-based-sample-size.html#cb5-16" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-17"><a href="one-sample-mean-precision-based-sample-size.html#cb5-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-18"><a href="one-sample-mean-precision-based-sample-size.html#cb5-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> <span class="fu">stop</span> (<span class="st">&quot;Exactly one of &#39;n&#39; and &#39;conf.width&#39; must be NULL&quot;</span>)</span>
<span id="cb5-19"><a href="one-sample-mean-precision-based-sample-size.html#cb5-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-20"><a href="one-sample-mean-precision-based-sample-size.html#cb5-20" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">list</span> (<span class="at">sd =</span> sd, <span class="at">n =</span> n, <span class="at">conf.width =</span> conf.width, <span class="at">conf.level =</span> conf.level)</span>
<span id="cb5-21"><a href="one-sample-mean-precision-based-sample-size.html#cb5-21" aria-hidden="true" tabindex="-1"></a>res }</span></code></pre></div>
</div>
</div>
<div id="simulation-study" class="section level2 hasAnchor" number="1.4">
<h2><span class="header-section-number">1.4</span> Simulation study<a href="one-sample-mean-precision-based-sample-size.html#simulation-study" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="one-sample-mean-precision-based-sample-size.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Write function to get n</span></span>
<span id="cb6-2"><a href="one-sample-mean-precision-based-sample-size.html#cb6-2" aria-hidden="true" tabindex="-1"></a>solve_n <span class="ot">&lt;-</span> <span class="cf">function</span> (precision, sd, <span class="at">conf.level=</span>.<span class="dv">95</span>, <span class="at">n =</span> <span class="cn">NULL</span>, <span class="at">method =</span> <span class="fu">c</span>(<span class="st">&quot;SE&quot;</span>, <span class="st">&quot;t-value&quot;</span>, <span class="st">&quot;z-value&quot;</span>))</span>
<span id="cb6-3"><a href="one-sample-mean-precision-based-sample-size.html#cb6-3" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb6-4"><a href="one-sample-mean-precision-based-sample-size.html#cb6-4" aria-hidden="true" tabindex="-1"></a>  method <span class="ot">&lt;-</span> <span class="fu">match.arg</span>(method, <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;SE&quot;</span>, <span class="st">&quot;t-value&quot;</span>, <span class="st">&quot;z-value&quot;</span>))</span>
<span id="cb6-5"><a href="one-sample-mean-precision-based-sample-size.html#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="one-sample-mean-precision-based-sample-size.html#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (method <span class="sc">==</span> <span class="st">&quot;SE&quot;</span>)</span>
<span id="cb6-7"><a href="one-sample-mean-precision-based-sample-size.html#cb6-7" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb6-8"><a href="one-sample-mean-precision-based-sample-size.html#cb6-8" aria-hidden="true" tabindex="-1"></a>    n <span class="ot">&lt;-</span> <span class="fu">se_mean</span>(<span class="at">sd =</span> sd, <span class="at">n =</span> <span class="cn">NULL</span>, <span class="at">se =</span> precision)<span class="sc">$</span>n</span>
<span id="cb6-9"><a href="one-sample-mean-precision-based-sample-size.html#cb6-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb6-10"><a href="one-sample-mean-precision-based-sample-size.html#cb6-10" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb6-11"><a href="one-sample-mean-precision-based-sample-size.html#cb6-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-12"><a href="one-sample-mean-precision-based-sample-size.html#cb6-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> <span class="cf">if</span>(method <span class="sc">==</span> <span class="st">&quot;z-value&quot;</span>)</span>
<span id="cb6-13"><a href="one-sample-mean-precision-based-sample-size.html#cb6-13" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb6-14"><a href="one-sample-mean-precision-based-sample-size.html#cb6-14" aria-hidden="true" tabindex="-1"></a>    n <span class="ot">&lt;-</span> <span class="fu">prec_mean_z</span>(<span class="at">sd =</span> sd, <span class="at">n =</span> <span class="cn">NULL</span>, <span class="at">conf.width =</span> precision, <span class="at">conf.level =</span> conf.level)<span class="sc">$</span>n</span>
<span id="cb6-15"><a href="one-sample-mean-precision-based-sample-size.html#cb6-15" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb6-16"><a href="one-sample-mean-precision-based-sample-size.html#cb6-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-17"><a href="one-sample-mean-precision-based-sample-size.html#cb6-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-18"><a href="one-sample-mean-precision-based-sample-size.html#cb6-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span>(method <span class="sc">==</span> <span class="st">&quot;t-value&quot;</span>)</span>
<span id="cb6-19"><a href="one-sample-mean-precision-based-sample-size.html#cb6-19" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb6-20"><a href="one-sample-mean-precision-based-sample-size.html#cb6-20" aria-hidden="true" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="fu">prec_mean</span> (<span class="at">mean =</span> <span class="dv">0</span>, <span class="at">conf.width =</span> precision, <span class="at">conf.level =</span> conf.level, <span class="at">sd =</span> sd)<span class="sc">$</span>n</span>
<span id="cb6-21"><a href="one-sample-mean-precision-based-sample-size.html#cb6-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-22"><a href="one-sample-mean-precision-based-sample-size.html#cb6-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-23"><a href="one-sample-mean-precision-based-sample-size.html#cb6-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-24"><a href="one-sample-mean-precision-based-sample-size.html#cb6-24" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> <span class="fu">stop</span> (<span class="st">&quot;&#39;method&#39; must be &#39;z&#39;, &#39;t&#39;, or &#39;SE&#39;&quot;</span>)</span>
<span id="cb6-25"><a href="one-sample-mean-precision-based-sample-size.html#cb6-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-26"><a href="one-sample-mean-precision-based-sample-size.html#cb6-26" aria-hidden="true" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="fu">ceiling</span>(n)</span>
<span id="cb6-27"><a href="one-sample-mean-precision-based-sample-size.html#cb6-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(n)</span>
<span id="cb6-28"><a href="one-sample-mean-precision-based-sample-size.html#cb6-28" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-29"><a href="one-sample-mean-precision-based-sample-size.html#cb6-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-30"><a href="one-sample-mean-precision-based-sample-size.html#cb6-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-31"><a href="one-sample-mean-precision-based-sample-size.html#cb6-31" aria-hidden="true" tabindex="-1"></a><span class="co">#Find n based on various sd, method, or, p.</span></span>
<span id="cb6-32"><a href="one-sample-mean-precision-based-sample-size.html#cb6-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-33"><a href="one-sample-mean-precision-based-sample-size.html#cb6-33" aria-hidden="true" tabindex="-1"></a><span class="do">## set vector of precision values (p0) and methods (m0) to explore</span></span>
<span id="cb6-34"><a href="one-sample-mean-precision-based-sample-size.html#cb6-34" aria-hidden="true" tabindex="-1"></a>p0 <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="at">by=</span>.<span class="dv">5</span>)</span>
<span id="cb6-35"><a href="one-sample-mean-precision-based-sample-size.html#cb6-35" aria-hidden="true" tabindex="-1"></a>sd0 <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb6-36"><a href="one-sample-mean-precision-based-sample-size.html#cb6-36" aria-hidden="true" tabindex="-1"></a>m0 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;SE&quot;</span>, <span class="st">&quot;t-value&quot;</span>, <span class="st">&quot;z-value&quot;</span>)</span>
<span id="cb6-37"><a href="one-sample-mean-precision-based-sample-size.html#cb6-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Data set with varying &#39;mean&#39; and &#39;w&#39;</span></span>
<span id="cb6-38"><a href="one-sample-mean-precision-based-sample-size.html#cb6-38" aria-hidden="true" tabindex="-1"></a>se_settings <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">p =</span> p0, <span class="at">sd =</span> sd0, <span class="at">m =</span> m0, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb6-39"><a href="one-sample-mean-precision-based-sample-size.html#cb6-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-40"><a href="one-sample-mean-precision-based-sample-size.html#cb6-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply the sim mean functions to all possibilities like se_settings</span></span>
<span id="cb6-41"><a href="one-sample-mean-precision-based-sample-size.html#cb6-41" aria-hidden="true" tabindex="-1"></a>se_settings<span class="sc">$</span>n <span class="ot">&lt;-</span> <span class="fu">sapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(se_settings), <span class="cf">function</span>(idx) <span class="fu">with</span> (se_settings, <span class="fu">solve_n</span> (<span class="at">precision =</span> p[idx], <span class="at">sd =</span> sd[idx], <span class="at">method =</span> m[idx])))</span>
<span id="cb6-42"><a href="one-sample-mean-precision-based-sample-size.html#cb6-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-43"><a href="one-sample-mean-precision-based-sample-size.html#cb6-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-44"><a href="one-sample-mean-precision-based-sample-size.html#cb6-44" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb6-45"><a href="one-sample-mean-precision-based-sample-size.html#cb6-45" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(se_settings, <span class="fu">aes</span>(<span class="at">x =</span> p, <span class="at">y =</span> n, <span class="at">color =</span> m, <span class="at">group =</span> m)) <span class="sc">+</span></span>
<span id="cb6-46"><a href="one-sample-mean-precision-based-sample-size.html#cb6-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb6-47"><a href="one-sample-mean-precision-based-sample-size.html#cb6-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_discrete</span>(<span class="st">&quot;Method&quot;</span>) <span class="sc">+</span></span>
<span id="cb6-48"><a href="one-sample-mean-precision-based-sample-size.html#cb6-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Target precision &#39;p&#39;&quot;</span>) <span class="sc">+</span></span>
<span id="cb6-49"><a href="one-sample-mean-precision-based-sample-size.html#cb6-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Sample size &#39;n&#39;&quot;</span>) <span class="sc">+</span></span>
<span id="cb6-50"><a href="one-sample-mean-precision-based-sample-size.html#cb6-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Sample size required to achieve target precision&quot;</span>)</span></code></pre></div>
<p><img src="A_01_one_mean_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>Graph various simulated precision’s for various methods, distributions,
and target precisions.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="one-sample-mean-precision-based-sample-size.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#  set up possible values for target precision, standard deviation, method, and distribution.</span></span>
<span id="cb7-2"><a href="one-sample-mean-precision-based-sample-size.html#cb7-2" aria-hidden="true" tabindex="-1"></a>p0 <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="at">by=</span>.<span class="dv">5</span>)</span>
<span id="cb7-3"><a href="one-sample-mean-precision-based-sample-size.html#cb7-3" aria-hidden="true" tabindex="-1"></a>sd0 <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb7-4"><a href="one-sample-mean-precision-based-sample-size.html#cb7-4" aria-hidden="true" tabindex="-1"></a>m0 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;SE&quot;</span>, <span class="st">&quot;t-value&quot;</span>, <span class="st">&quot;z-value&quot;</span>)</span>
<span id="cb7-5"><a href="one-sample-mean-precision-based-sample-size.html#cb7-5" aria-hidden="true" tabindex="-1"></a>d0 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;normal&quot;</span>, <span class="st">&quot;uniform&quot;</span>, <span class="st">&quot;exp&quot;</span>)</span>
<span id="cb7-6"><a href="one-sample-mean-precision-based-sample-size.html#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="one-sample-mean-precision-based-sample-size.html#cb7-7" aria-hidden="true" tabindex="-1"></a>sim_settings <span class="ot">&lt;-</span> <span class="fu">rbind</span>(</span>
<span id="cb7-8"><a href="one-sample-mean-precision-based-sample-size.html#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expand.grid</span>(</span>
<span id="cb7-9"><a href="one-sample-mean-precision-based-sample-size.html#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">sd =</span> sd0,</span>
<span id="cb7-10"><a href="one-sample-mean-precision-based-sample-size.html#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">p =</span> p0,</span>
<span id="cb7-11"><a href="one-sample-mean-precision-based-sample-size.html#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> m0, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>,</span>
<span id="cb7-12"><a href="one-sample-mean-precision-based-sample-size.html#cb7-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">distribution =</span> d0),</span>
<span id="cb7-13"><a href="one-sample-mean-precision-based-sample-size.html#cb7-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expand.grid</span>(</span>
<span id="cb7-14"><a href="one-sample-mean-precision-based-sample-size.html#cb7-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd =</span> sd0,</span>
<span id="cb7-15"><a href="one-sample-mean-precision-based-sample-size.html#cb7-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">p =</span> p0,</span>
<span id="cb7-16"><a href="one-sample-mean-precision-based-sample-size.html#cb7-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> m0, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>,</span>
<span id="cb7-17"><a href="one-sample-mean-precision-based-sample-size.html#cb7-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">distribution =</span> d0</span>
<span id="cb7-18"><a href="one-sample-mean-precision-based-sample-size.html#cb7-18" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb7-19"><a href="one-sample-mean-precision-based-sample-size.html#cb7-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Allow function to be used from presize</span></span>
<span id="cb7-20"><a href="one-sample-mean-precision-based-sample-size.html#cb7-20" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(presize)</span>
<span id="cb7-21"><a href="one-sample-mean-precision-based-sample-size.html#cb7-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function to calculate the simulated precisions.</span></span>
<span id="cb7-22"><a href="one-sample-mean-precision-based-sample-size.html#cb7-22" aria-hidden="true" tabindex="-1"></a>sim_mean <span class="ot">&lt;-</span> <span class="cf">function</span> (sd, <span class="at">n=</span><span class="cn">NULL</span>, <span class="at">conf.level =</span> .<span class="dv">95</span>, precision, <span class="at">R =</span> <span class="dv">1000</span>, <span class="at">method =</span> <span class="fu">c</span>(<span class="st">&quot;SE&quot;</span>, <span class="st">&quot;t-value&quot;</span>, <span class="st">&quot;z-value&quot;</span>), <span class="at">distribution =</span> <span class="fu">c</span>(<span class="st">&quot;normal&quot;</span>, <span class="st">&quot;uniform&quot;</span>, <span class="st">&quot;exp&quot;</span>))  </span>
<span id="cb7-23"><a href="one-sample-mean-precision-based-sample-size.html#cb7-23" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb7-24"><a href="one-sample-mean-precision-based-sample-size.html#cb7-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-25"><a href="one-sample-mean-precision-based-sample-size.html#cb7-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Allow variants of SE, t-value, and z-value; prevent non-characters from being allowed.</span></span>
<span id="cb7-26"><a href="one-sample-mean-precision-based-sample-size.html#cb7-26" aria-hidden="true" tabindex="-1"></a>  method <span class="ot">&lt;-</span> <span class="fu">match.arg</span>(method, <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;SE&quot;</span>, <span class="st">&quot;t-value&quot;</span>, <span class="st">&quot;z-value&quot;</span>))</span>
<span id="cb7-27"><a href="one-sample-mean-precision-based-sample-size.html#cb7-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-28"><a href="one-sample-mean-precision-based-sample-size.html#cb7-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Find sample size (n) depending on method.</span></span>
<span id="cb7-29"><a href="one-sample-mean-precision-based-sample-size.html#cb7-29" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (method <span class="sc">==</span> <span class="st">&quot;SE&quot;</span>)</span>
<span id="cb7-30"><a href="one-sample-mean-precision-based-sample-size.html#cb7-30" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb7-31"><a href="one-sample-mean-precision-based-sample-size.html#cb7-31" aria-hidden="true" tabindex="-1"></a>    n<span class="ot">&lt;-</span>(sd<span class="sc">^</span><span class="dv">2</span>)<span class="sc">/</span>precision<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb7-32"><a href="one-sample-mean-precision-based-sample-size.html#cb7-32" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-33"><a href="one-sample-mean-precision-based-sample-size.html#cb7-33" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> <span class="cf">if</span>(method <span class="sc">==</span> <span class="st">&quot;z-value&quot;</span>)</span>
<span id="cb7-34"><a href="one-sample-mean-precision-based-sample-size.html#cb7-34" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb7-35"><a href="one-sample-mean-precision-based-sample-size.html#cb7-35" aria-hidden="true" tabindex="-1"></a>    alpha <span class="ot">&lt;-</span> (<span class="dv">1</span><span class="sc">-</span>conf.level)<span class="sc">/</span><span class="dv">2</span></span>
<span id="cb7-36"><a href="one-sample-mean-precision-based-sample-size.html#cb7-36" aria-hidden="true" tabindex="-1"></a>  z <span class="ot">&lt;-</span> <span class="fu">qnorm</span>(alpha, <span class="at">lower.tail =</span> <span class="cn">FALSE</span>)</span>
<span id="cb7-37"><a href="one-sample-mean-precision-based-sample-size.html#cb7-37" aria-hidden="true" tabindex="-1"></a>   ci <span class="ot">&lt;-</span> precision<span class="sc">/</span><span class="dv">2</span></span>
<span id="cb7-38"><a href="one-sample-mean-precision-based-sample-size.html#cb7-38" aria-hidden="true" tabindex="-1"></a>  n <span class="ot">&lt;-</span> ((sd<span class="sc">*</span>z)<span class="sc">/</span>ci)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb7-39"><a href="one-sample-mean-precision-based-sample-size.html#cb7-39" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-40"><a href="one-sample-mean-precision-based-sample-size.html#cb7-40" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> <span class="cf">if</span>(method <span class="sc">==</span> <span class="st">&quot;t-value&quot;</span>)</span>
<span id="cb7-41"><a href="one-sample-mean-precision-based-sample-size.html#cb7-41" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb7-42"><a href="one-sample-mean-precision-based-sample-size.html#cb7-42" aria-hidden="true" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="fu">prec_mean</span> (<span class="at">mean =</span> <span class="dv">0</span>, <span class="at">conf.width =</span> precision, <span class="at">conf.level =</span> conf.level, <span class="at">sd =</span> sd)<span class="sc">$</span>n</span>
<span id="cb7-43"><a href="one-sample-mean-precision-based-sample-size.html#cb7-43" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-44"><a href="one-sample-mean-precision-based-sample-size.html#cb7-44" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span> <span class="fu">stop</span> (<span class="st">&quot;&#39;method&#39; must be &#39;z&#39;, &#39;t&#39;, or &#39;SE&#39;&quot;</span>)</span>
<span id="cb7-45"><a href="one-sample-mean-precision-based-sample-size.html#cb7-45" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-46"><a href="one-sample-mean-precision-based-sample-size.html#cb7-46" aria-hidden="true" tabindex="-1"></a><span class="co"># Round n up to nearest interger.</span></span>
<span id="cb7-47"><a href="one-sample-mean-precision-based-sample-size.html#cb7-47" aria-hidden="true" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="fu">ceiling</span>(n)</span>
<span id="cb7-48"><a href="one-sample-mean-precision-based-sample-size.html#cb7-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-49"><a href="one-sample-mean-precision-based-sample-size.html#cb7-49" aria-hidden="true" tabindex="-1"></a><span class="co">#Simulate possible outcome with the predicted SD and the predicted n and various distributions.</span></span>
<span id="cb7-50"><a href="one-sample-mean-precision-based-sample-size.html#cb7-50" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (distribution <span class="sc">==</span> <span class="st">&quot;normal&quot;</span>)</span>
<span id="cb7-51"><a href="one-sample-mean-precision-based-sample-size.html#cb7-51" aria-hidden="true" tabindex="-1"></a>se_vec <span class="ot">&lt;-</span> <span class="fu">replicate</span> (R, {x <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="at">n =</span> n, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> sd); sd_x <span class="ot">=</span> <span class="fu">sd</span>(x); sd_x<span class="sc">/</span><span class="fu">sqrt</span>(n)})</span>
<span id="cb7-52"><a href="one-sample-mean-precision-based-sample-size.html#cb7-52" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-53"><a href="one-sample-mean-precision-based-sample-size.html#cb7-53" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (distribution <span class="sc">==</span> <span class="st">&quot;uniform&quot;</span>)</span>
<span id="cb7-54"><a href="one-sample-mean-precision-based-sample-size.html#cb7-54" aria-hidden="true" tabindex="-1"></a>  se_vec <span class="ot">&lt;-</span> <span class="fu">replicate</span> (R, {x <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="at">n =</span> n, <span class="at">min =</span> <span class="dv">0</span>, <span class="at">max =</span> sd<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">12</span>)); sd_x <span class="ot">=</span> <span class="fu">sd</span>(x); sd_x<span class="sc">/</span><span class="fu">sqrt</span>(n)})</span>
<span id="cb7-55"><a href="one-sample-mean-precision-based-sample-size.html#cb7-55" aria-hidden="true" tabindex="-1"></a>  <span class="do">## To use the runif function the min and max must be calculated in relationship to standard deviation*.</span></span>
<span id="cb7-56"><a href="one-sample-mean-precision-based-sample-size.html#cb7-56" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-57"><a href="one-sample-mean-precision-based-sample-size.html#cb7-57" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-58"><a href="one-sample-mean-precision-based-sample-size.html#cb7-58" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (distribution <span class="sc">==</span> <span class="st">&quot;exp&quot;</span>)</span>
<span id="cb7-59"><a href="one-sample-mean-precision-based-sample-size.html#cb7-59" aria-hidden="true" tabindex="-1"></a>  se_vec <span class="ot">&lt;-</span> <span class="fu">replicate</span> (R, {x <span class="ot">&lt;-</span> <span class="fu">rexp</span>(<span class="at">n =</span> n, <span class="at">rate =</span> <span class="dv">1</span><span class="sc">/</span>sd); sd_x <span class="ot">=</span> <span class="fu">sd</span>(x); sd_x<span class="sc">/</span><span class="fu">sqrt</span>(n)})</span>
<span id="cb7-60"><a href="one-sample-mean-precision-based-sample-size.html#cb7-60" aria-hidden="true" tabindex="-1"></a>  <span class="do">##To use the rexp function the rate must be calculated in relationship to standard deviation**.</span></span>
<span id="cb7-61"><a href="one-sample-mean-precision-based-sample-size.html#cb7-61" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-62"><a href="one-sample-mean-precision-based-sample-size.html#cb7-62" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (method <span class="sc">==</span> <span class="st">&quot;t-value&quot;</span>)</span>
<span id="cb7-63"><a href="one-sample-mean-precision-based-sample-size.html#cb7-63" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb7-64"><a href="one-sample-mean-precision-based-sample-size.html#cb7-64" aria-hidden="true" tabindex="-1"></a>      t_value <span class="ot">&lt;-</span> <span class="fu">qt</span>(<span class="at">p=</span> (<span class="dv">1</span> <span class="sc">-</span> conf.level)<span class="sc">/</span><span class="dv">2</span>, <span class="at">df =</span> n <span class="sc">-</span> <span class="dv">1</span>, <span class="at">lower.tail =</span> <span class="cn">FALSE</span>)</span>
<span id="cb7-65"><a href="one-sample-mean-precision-based-sample-size.html#cb7-65" aria-hidden="true" tabindex="-1"></a>      t_ci <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">*</span>(t_value<span class="sc">*</span>se_vec)</span>
<span id="cb7-66"><a href="one-sample-mean-precision-based-sample-size.html#cb7-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-67"><a href="one-sample-mean-precision-based-sample-size.html#cb7-67" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-68"><a href="one-sample-mean-precision-based-sample-size.html#cb7-68" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (method <span class="sc">==</span> <span class="st">&quot;z-value&quot;</span>)</span>
<span id="cb7-69"><a href="one-sample-mean-precision-based-sample-size.html#cb7-69" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb7-70"><a href="one-sample-mean-precision-based-sample-size.html#cb7-70" aria-hidden="true" tabindex="-1"></a>    z_value <span class="ot">&lt;-</span> <span class="fu">qnorm</span> (<span class="at">p =</span> (<span class="dv">1</span> <span class="sc">-</span> conf.level)<span class="sc">/</span><span class="dv">2</span>, <span class="at">lower.tail =</span> <span class="cn">FALSE</span>)</span>
<span id="cb7-71"><a href="one-sample-mean-precision-based-sample-size.html#cb7-71" aria-hidden="true" tabindex="-1"></a>    z_ci <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">*</span>(z_value<span class="sc">*</span>se_vec)</span>
<span id="cb7-72"><a href="one-sample-mean-precision-based-sample-size.html#cb7-72" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb7-73"><a href="one-sample-mean-precision-based-sample-size.html#cb7-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-74"><a href="one-sample-mean-precision-based-sample-size.html#cb7-74" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (method <span class="sc">==</span> <span class="st">&quot;SE&quot;</span>)</span>
<span id="cb7-75"><a href="one-sample-mean-precision-based-sample-size.html#cb7-75" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb7-76"><a href="one-sample-mean-precision-based-sample-size.html#cb7-76" aria-hidden="true" tabindex="-1"></a>  precision_dataframe <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">sd =</span> sd, <span class="at">n =</span> n, <span class="at">method =</span> <span class="st">&quot;SE&quot;</span>, <span class="at">distribution =</span> distribution, <span class="at">precision =</span> se_vec, <span class="at">target =</span> precision)</span>
<span id="cb7-77"><a href="one-sample-mean-precision-based-sample-size.html#cb7-77" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-78"><a href="one-sample-mean-precision-based-sample-size.html#cb7-78" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (method <span class="sc">==</span> <span class="st">&quot;t-value&quot;</span>)</span>
<span id="cb7-79"><a href="one-sample-mean-precision-based-sample-size.html#cb7-79" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb7-80"><a href="one-sample-mean-precision-based-sample-size.html#cb7-80" aria-hidden="true" tabindex="-1"></a>  precision_dataframe <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">sd =</span> sd, <span class="at">n =</span> n, <span class="at">method =</span> <span class="st">&quot;t-value&quot;</span>, <span class="at">distribution =</span> distribution, <span class="at">precision =</span> t_ci, <span class="at">target =</span> precision)</span>
<span id="cb7-81"><a href="one-sample-mean-precision-based-sample-size.html#cb7-81" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-82"><a href="one-sample-mean-precision-based-sample-size.html#cb7-82" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (method <span class="sc">==</span> <span class="st">&quot;z-value&quot;</span>)</span>
<span id="cb7-83"><a href="one-sample-mean-precision-based-sample-size.html#cb7-83" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb7-84"><a href="one-sample-mean-precision-based-sample-size.html#cb7-84" aria-hidden="true" tabindex="-1"></a>  precision_dataframe <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">sd =</span> sd, <span class="at">n =</span> n, <span class="at">method =</span> <span class="st">&quot;z-value&quot;</span>, <span class="at">distribution =</span> distribution, <span class="at">precision =</span> z_ci, <span class="at">target =</span> precision)</span>
<span id="cb7-85"><a href="one-sample-mean-precision-based-sample-size.html#cb7-85" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-86"><a href="one-sample-mean-precision-based-sample-size.html#cb7-86" aria-hidden="true" tabindex="-1"></a><span class="fu">return</span>(precision_dataframe)  </span>
<span id="cb7-87"><a href="one-sample-mean-precision-based-sample-size.html#cb7-87" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-88"><a href="one-sample-mean-precision-based-sample-size.html#cb7-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-89"><a href="one-sample-mean-precision-based-sample-size.html#cb7-89" aria-hidden="true" tabindex="-1"></a><span class="co">#Run simulation for each value of the grid:</span></span>
<span id="cb7-90"><a href="one-sample-mean-precision-based-sample-size.html#cb7-90" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">12345</span>)</span>
<span id="cb7-91"><a href="one-sample-mean-precision-based-sample-size.html#cb7-91" aria-hidden="true" tabindex="-1"></a>sim_list <span class="ot">&lt;-</span> <span class="fu">lapply</span> (<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(sim_settings), </span>
<span id="cb7-92"><a href="one-sample-mean-precision-based-sample-size.html#cb7-92" aria-hidden="true" tabindex="-1"></a>              <span class="cf">function</span>(idx) <span class="fu">with</span> (sim_settings, </span>
<span id="cb7-93"><a href="one-sample-mean-precision-based-sample-size.html#cb7-93" aria-hidden="true" tabindex="-1"></a>                                  <span class="fu">sim_mean</span>(<span class="at">precision =</span> p[idx], <span class="at">sd =</span> sd0, </span>
<span id="cb7-94"><a href="one-sample-mean-precision-based-sample-size.html#cb7-94" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">method =</span> method[idx], <span class="at">distribution =</span> distribution[idx], <span class="at">R =</span> <span class="dv">1000</span>)))</span>
<span id="cb7-95"><a href="one-sample-mean-precision-based-sample-size.html#cb7-95" aria-hidden="true" tabindex="-1"></a>sim_res <span class="ot">&lt;-</span> <span class="fu">do.call</span>(rbind, sim_list)</span>
<span id="cb7-96"><a href="one-sample-mean-precision-based-sample-size.html#cb7-96" aria-hidden="true" tabindex="-1"></a><span class="co"># Graph sim_res</span></span>
<span id="cb7-97"><a href="one-sample-mean-precision-based-sample-size.html#cb7-97" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb7-98"><a href="one-sample-mean-precision-based-sample-size.html#cb7-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-99"><a href="one-sample-mean-precision-based-sample-size.html#cb7-99" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sim_res, <span class="fu">aes</span> (<span class="at">x=</span>target, <span class="at">y =</span> precision, <span class="at">color =</span> <span class="fu">factor</span>(method))) <span class="sc">+</span></span>
<span id="cb7-100"><a href="one-sample-mean-precision-based-sample-size.html#cb7-100" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(method<span class="sc">~</span>distribution, <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>) <span class="sc">+</span></span>
<span id="cb7-101"><a href="one-sample-mean-precision-based-sample-size.html#cb7-101" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">group=</span><span class="fu">interaction</span>(method, distribution, target)), <span class="at">outlier.size =</span> <span class="dv">1</span>, <span class="at">outlier.alpha =</span> <span class="fl">0.025</span>) <span class="sc">+</span></span>
<span id="cb7-102"><a href="one-sample-mean-precision-based-sample-size.html#cb7-102" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_discrete</span>(<span class="st">&quot;Targeted precision&quot;</span>) <span class="sc">+</span></span>
<span id="cb7-103"><a href="one-sample-mean-precision-based-sample-size.html#cb7-103" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">slope =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="A_01_one_mean_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>Notes</p>
<ul>
<li><p>In the uniform distribution <span class="math inline">\(\frac{1}{\sqrt{12}}(b-a) = sd\)</span> where b
is the maximum, a is the minimum, and sd is the standard deviation.
Because we only need to know the range, we can assign a value to a and
solve it in relationship to b. Therefore, we can assign a (the minimum)
as 0 and solve for b (the maximum). After solving for the maximum (b),
we calculate that <span class="math inline">\(b = sd*\sqrt{12}\)</span>.</p></li>
<li><p>In the exponent distribution <span class="math inline">\(sd = \frac{1}{\lambda}\)</span>, where
<span class="math inline">\(\lambda = rate\)</span>. Therefore solving for rate, we calculate that
<span class="math inline">\(\lambda = \frac{1}{sd}\)</span>.</p></li>
</ul>
</div>
<div id="getting-inputs" class="section level2 hasAnchor" number="1.5">
<h2><span class="header-section-number">1.5</span> Getting inputs<a href="one-sample-mean-precision-based-sample-size.html#getting-inputs" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="estimating-standard-deviation" class="section level3 hasAnchor" number="1.5.1">
<h3><span class="header-section-number">1.5.1</span> Estimating Standard Deviation<a href="one-sample-mean-precision-based-sample-size.html#estimating-standard-deviation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To estimate n from sample error (or vice versa), standard deviation must
be either known or estimated. Some ways to obtain an already known
standard deviation, include researching standard deviations obtained
from similar studies or using a universal, known standard deviation
(depending on the type of study).</p>
<p>If standard deviation cannot be obtained in this way, it must be
estimated. Use information known about the value being collected to
estimate an approximate minimum value collected and an approximate
maximum value. For example, height of adults can have an estimated
minimum collected value of 4 ft and 9 inches and estimated maximum
collected value of 6 feet and 2 inches. While there are adults with
heights below 4 feet and 9 inches and above 6 feet and 3 inches, they
are very uncommon and therefore (by probability) not likely to be in the
sample. Ideally, this will give a range close to the range of the data
collected.</p>
<p>After a range is estimated, we can then us a formula called the range
rule for standard deviation which states the following:</p>
<p>sd <span class="math inline">\(\approx \frac{max-min}{4}\)</span> where sd = standard deviation, max =
estimated maximum value, and min = estimated minimum value.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="one-sample-mean-precision-based-sample-size.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Calculate sample standard deviation for a given range. There must be exactly one one &#39;max&#39; and one &#39;min.&#39;</span></span>
<span id="cb8-2"><a href="one-sample-mean-precision-based-sample-size.html#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; sd = standard deviation</span></span>
<span id="cb8-3"><a href="one-sample-mean-precision-based-sample-size.html#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;  max = estimated maximum value</span></span>
<span id="cb8-4"><a href="one-sample-mean-precision-based-sample-size.html#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;  min = estimated minimum value</span></span>
<span id="cb8-5"><a href="one-sample-mean-precision-based-sample-size.html#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="one-sample-mean-precision-based-sample-size.html#cb8-6" aria-hidden="true" tabindex="-1"></a>sd_from_range <span class="ot">&lt;-</span> <span class="cf">function</span> (<span class="at">max=</span>max, <span class="at">min=</span>min, <span class="at">sd=</span><span class="cn">NULL</span>) {</span>
<span id="cb8-7"><a href="one-sample-mean-precision-based-sample-size.html#cb8-7" aria-hidden="true" tabindex="-1"></a>sd <span class="ot">&lt;-</span> (max <span class="sc">-</span> min)<span class="sc">/</span><span class="dv">4</span></span>
<span id="cb8-8"><a href="one-sample-mean-precision-based-sample-size.html#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="fu">return</span>(sd)</span>
<span id="cb8-9"><a href="one-sample-mean-precision-based-sample-size.html#cb8-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
</div>
<div id="example-revisited" class="section level2 hasAnchor" number="1.6">
<h2><span class="header-section-number">1.6</span> Example revisited<a href="one-sample-mean-precision-based-sample-size.html#example-revisited" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>As stated in the example, we want to calculate the sample size (n) based
on a t-score method and a claimed standard deviation of 10.
Additionally, we know the mean is 50, but this is an unnecessary fact
for calculating n. Since we are only finding the sample size, we would
use the solve_n function created earlier. In order to find n, we need
standard deviation, precision, and a chosen confidence level.</p>
<p>The example gives us a known standard deviation of 10. To estimate
precision, we can use other studies with similar studies and use what
was obtained in them or use studies that determine minimally important
differences (MIDs). For example, in this study we can use a study from
the National Library of Medicine titled “estimating minimally important
differences for the PROMIS pain interference scales: results from 3
randomized clinic trials” to determine an approximate minimally
important differences (Source 1). Using the data, we can estimate a
minimum importance difference (MID) of around 3 (Source 1), which means
that in order to get the confidence width (or precision), which
calculates the likelihood of it being outside of the acceptable range on
both sides of the target value would be to multiply the approximate MID
by 2. Therefore, the precision for this example is 6.</p>
<p><span class="math display">\[
MID*2 = precision
\]</span></p>
<p>Choose a confidence level based on preference. In this case, we can
choose a 95 percent confidence level.</p>
<p>Since we have a n of 46 calculated from the solve_n function, the
minimal sample size is 46.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="one-sample-mean-precision-based-sample-size.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">solve_n</span>(<span class="at">precision =</span> <span class="dv">6</span>, <span class="at">sd =</span><span class="dv">10</span>, <span class="at">method =</span> <span class="st">&quot;t-value&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 46</code></pre>
<p>In conclusion, we can state the following:</p>
<p>Assuming the standard deviation of 10, with 46 patients the mean PROMIS
questionnaire scores can be estimated with a precision not exceeding a
width of 6 points on a 95% confidence level (margin of error of 3
points).</p>
<ol style="list-style-type: decimal">
<li><a href="https://pubmed.ncbi.nlm.nih.gov/29200181/#&amp;gid=article-figures&amp;pid=figure-1-uid-0" class="uri">https://pubmed.ncbi.nlm.nih.gov/29200181/#&amp;gid=article-figures&amp;pid=figure-1-uid-0</a></li>
</ol>
</div>
<div id="functions-in-r-packages" class="section level2 hasAnchor" number="1.7">
<h2><span class="header-section-number">1.7</span> Functions in R packages<a href="one-sample-mean-precision-based-sample-size.html#functions-in-r-packages" class="anchor-section" aria-label="Anchor link to header"></a></h2>

</div>
</div>




</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="one-sample-proportion-precision-based-sample-size.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
